### 引用（import）
目前我们的**bookzone**模型基本完成了，此时公司决定开展一条新的业务————“在线听书”，此时我们需要新写一个名为**audiozone**模型。

可以想到这个新的业务其实与传统的图书销售非常类似，也由**读者、作者、书籍**组成，并且**购买**之类的行为也是类似的。

如果我们重新复制粘贴一遍理论上来说也是可行的，不过型号YANG提供了`import`关键字，可以更方便实现这个功能，实际上我们已经在之前的模型中引用了**IETF**的`ietf-yang-types`。

新建`audiozone-example.yang`文件，内容如下：
```yang
module audiozone-example { 
  yang-version 1.1; 
  namespace 'http://example.com/ns/audioone'; 
  prefix az; 
 
  import bookzone-example { 
    prefix bz; 
  } 
  import ietf-yang-types { 
    prefix yang; 
  } 
 
  organization 
    "AudioZone, a subsidiary of the fictive book store chain BookZone"; 
  description 
    "AudioZone defines this model to provide a standard interface for 
     inventory browser and management applications. This module extends 
     the bookzone-example.yang module."

  revision 2025-12-18 { 
    description "Initial revision."; 
  }
}
```
`import`关键字与Python的`import`类似，引用之后在下文中使用前缀来直接使用被引用的模型中的内容。在新模型中新建一种代表音频流的身份：
```yang
identity streaming { 
  base bz:file-idty; 
  description 
    "Audiobook streaming."; 
}
```
可以看到我们使用了`bz:file-idty`代表这个新身份为基于文件的身份，可以适用于各种文件类书籍的操作。

### 增强（augment）
接下来我们希望在`audiozone`的每本有声书下面添加评论内容，同时也不影响原模型，可以使用`augment`关键字：
```yang
augment /bz:books/bz:book { 
  list recommendations { 
    key review-date; 
    leaf review-date { 
      type yang:date-and-time; 
    } 
    leaf score { 
      type uint32 { 
        range 1..5; 
      } 
    } 
    leaf review-comment { 
      type string; 
    } 
  } 
}
```
这样我们就在`audiozone`模型中定义了一种增强型的`book`。

接下来我们想为用户添加一个好友列表：
```yang
augment /bz:users/bz:user { 
  leaf-list friends { 
    type leafref { 
      path /bz:users/bz:user/bz:name; 
    } 
  } 
}
```
其中`leaf-list`是一种更简洁的列表，它只有一个节点（或者说只有一列）。

### 偏差（deviation）
让我们把目光移回YANG模型的主要应用领域————网络设备，实际上IETF已经定义了一系列标准YANG模型，但是可能我作为一个设备厂商不太支持IETF定义的某个参数，或者某些参数的范围有调整，就可以使用`deviation`来声明自己对标准模型的偏差：
```yang
deviation /sys:system/sys:hostname {
  deviate not-supported; // 表示不支持该节点
}

deviation /if:interfaces/if:interface/if:mtu {
  deviate replace {
    type uint32 {
      range "68..9000"; // 替换原有的取值范围
    }
  }
}
```

### 扩展（extension）
YANG模型已经提供了很多关键字，但是有可能在使用过程中还需要一些自定义的关键字，这时就可以使用`extension`关键字扩展语法表达能力：
```
module interface-state-extended {
  namespace "urn:example:interface-state-extended";
  prefix "if-ext";
  yang-version 1.1;
  import ietf-interfaces {
    prefix if;
    revision-date "2018-02-20";
  }

  revision "2025-12-18" { 
    description "Fixed extension syntax errors"; 
  }

  // ========== 扩展定义 ==========
  extension health-score-rule {
    description "Mark health score with alarm thresholds (format: health:alarm)";
    argument "thresholds";
    status current;
  }

  // ========== 扩展使用 ==========
  augment "/if:interfaces/if:interface" {
    description "Add health score with alarm rule";
    leaf health-score {
      if-ext:health-score-rule "90:60";  
      type uint8 { 
        range "0..100"; 
      }
      default 75;
      description "Interface health score (0-100). Thresholds: health=90, alarm=60";
    }
  }
}
```
可以看到在增强后的`interface`中直接使用`if-ext:health-score-rule "90:60"`定义了接口的健康度阈值范围。同样也可以在其他位置定义不同的健康度阈值范围。